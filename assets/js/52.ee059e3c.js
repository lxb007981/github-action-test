(window.webpackJsonp=window.webpackJsonp||[]).push([[52],{448:function(t,s,a){"use strict";a.r(s);var n=a(32),r=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"弹幕元数据"}},[t._v("弹幕元数据")]),t._v(" "),a("p",[t._v("2020-09-25 B站更新了互动弹幕功能，包括UP主头像弹幕、关联视频弹幕、视频内嵌引导关注按钮三大功能")]),t._v(" "),a("p",[t._v("详情见：")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://www.bilibili.com/read/cv7728299",target:"_blank",rel:"noopener noreferrer"}},[t._v("【客户端更新】6.10版本更新！UP主支持发布关联视频弹幕"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("a",{attrs:{href:"https://www.bilibili.com/blackboard/activity-c8a0iDRQy.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("引导关注卡片"),a("OutboundLink")],1)]),t._v(" "),a("hr"),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"#%E8%8E%B7%E5%8F%96%E5%BC%B9%E5%B9%95%E4%B8%AA%E4%BA%BA%E9%85%8D%E7%BD%AE%E4%B8%8E%E4%BA%92%E5%8A%A8%E5%BC%B9%E5%B9%95%E5%8F%8ABAS%EF%BC%88%E4%BB%A3%E7%A0%81%EF%BC%89%E5%BC%B9%E5%B9%95%E4%B8%93%E5%8C%85%EF%BC%88web%E7%AB%AF%EF%BC%89"}},[t._v("获取弹幕个人配置与互动弹幕及BAS（代码）弹幕专包（web端）")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#%E5%AE%9E%E4%BE%8B"}},[t._v("实例")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"#%E8%8E%B7%E5%8F%96%E4%BA%92%E5%8A%A8%E5%BC%B9%E5%B9%95"}},[t._v("获取互动弹幕")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#%E8%8E%B7%E5%8F%96BAS%EF%BC%88%E4%BB%A3%E7%A0%81%EF%BC%89%E5%BC%B9%E5%B9%95%E4%B8%93%E5%8C%85"}},[t._v("获取BAS（代码）弹幕专包")])])])])]),t._v(" "),a("hr"),t._v(" "),a("h2",{attrs:{id:"获取弹幕个人配置与互动弹幕及bas-代码-弹幕专包-web端"}},[t._v("获取弹幕个人配置与互动弹幕及BAS（代码）弹幕专包（web端）")]),t._v(" "),a("blockquote",[a("p",[t._v("http://api.bilibili.com/x/v2/dm/web/view")])]),t._v(" "),a("p",[a("em",[t._v("请求方式：GET")])]),t._v(" "),a("p",[t._v("认证方式：仅可Cookie（SESSDATA）")]),t._v(" "),a("p",[a("strong",[t._v("url参数：")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("参数名")]),t._v(" "),a("th",[t._v("类型")]),t._v(" "),a("th",[t._v("内容")]),t._v(" "),a("th",[t._v("必要性")]),t._v(" "),a("th",[t._v("备注")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("type")]),t._v(" "),a("td",[t._v("num")]),t._v(" "),a("td",[t._v("弹幕类")]),t._v(" "),a("td",[t._v("必要")]),t._v(" "),a("td",[t._v("1：视频弹幕")])]),t._v(" "),a("tr",[a("td",[t._v("oid")]),t._v(" "),a("td",[t._v("num")]),t._v(" "),a("td",[t._v("视频cid")]),t._v(" "),a("td",[t._v("必要")]),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",[t._v("pid")]),t._v(" "),a("td",[t._v("num")]),t._v(" "),a("td",[t._v("稿件avid")]),t._v(" "),a("td",[t._v("非必要")]),t._v(" "),a("td")])])]),t._v(" "),a("p",[a("strong",[t._v("proto回复：")])]),t._v(" "),a("p",[t._v("消息"),a("code",[t._v("DmWebViewReply")]),t._v("：")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("名称")]),t._v(" "),a("th",[t._v("类型")]),t._v(" "),a("th",[t._v("含义")]),t._v(" "),a("th",[t._v("备注")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("state")]),t._v(" "),a("td",[t._v("int32")]),t._v(" "),a("td",[t._v("弹幕开放状态")]),t._v(" "),a("td",[t._v("0：开放弹幕"),a("br"),t._v("1：禁止弹幕")])]),t._v(" "),a("tr",[a("td",[t._v("text")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("？")]),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",[t._v("textSide")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("？")]),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",[t._v("dmSge")]),t._v(" "),a("td",[t._v("DmSegConfig")]),t._v(" "),a("td",[t._v("分段弹幕包信息？")]),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",[t._v("flag")]),t._v(" "),a("td",[t._v("DanmakuFlagConfig")]),t._v(" "),a("td",[t._v("？")]),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",[t._v("specialDms")]),t._v(" "),a("td",[t._v("repeated string")]),t._v(" "),a("td",[t._v("BAS（代码）弹幕专包url")]),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",[t._v("checkBox")]),t._v(" "),a("td",[t._v("bool")]),t._v(" "),a("td",[t._v("？")]),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",[t._v("count")]),t._v(" "),a("td",[t._v("int64")]),t._v(" "),a("td",[t._v("实际弹幕总数")]),t._v(" "),a("td",[t._v("具有1500-6000不等的上限")])]),t._v(" "),a("tr",[a("td",[t._v("commandDms")]),t._v(" "),a("td",[t._v("repeated CommandDm")]),t._v(" "),a("td",[t._v("互动弹幕条目")]),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",[t._v("dmSetting")]),t._v(" "),a("td",[t._v("DanmuWebPlayerConfig")]),t._v(" "),a("td",[t._v("弹幕个人配置")]),t._v(" "),a("td",[t._v("仅登录后存在")])])])]),t._v(" "),a("p",[t._v("消息"),a("code",[t._v("dmSge")]),t._v("：")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("名称")]),t._v(" "),a("th",[t._v("类型")]),t._v(" "),a("th",[t._v("含义")]),t._v(" "),a("th",[t._v("备注")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("pageSize")]),t._v(" "),a("td",[t._v("int64")]),t._v(" "),a("td",[t._v("分段时间？")]),t._v(" "),a("td",[t._v("单位为毫秒")])]),t._v(" "),a("tr",[a("td",[t._v("total")]),t._v(" "),a("td",[t._v("int64")]),t._v(" "),a("td",[t._v("最大分页数？")]),t._v(" "),a("td")])])]),t._v(" "),a("p",[t._v("消息"),a("code",[t._v("flag")]),t._v("：")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("名称")]),t._v(" "),a("th",[t._v("类型")]),t._v(" "),a("th",[t._v("含义")]),t._v(" "),a("th",[t._v("备注")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("recFlag")]),t._v(" "),a("td",[t._v("int32")]),t._v(" "),a("td",[t._v("？")]),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",[t._v("recText")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("？")]),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",[t._v("recSwitch")]),t._v(" "),a("td",[t._v("int32")]),t._v(" "),a("td",[t._v("？")]),t._v(" "),a("td")])])]),t._v(" "),a("p",[t._v("消息"),a("code",[t._v("commandDms")]),t._v("：")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("名称")]),t._v(" "),a("th",[t._v("类型")]),t._v(" "),a("th",[t._v("含义")]),t._v(" "),a("th",[t._v("备注")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("id")]),t._v(" "),a("td",[t._v("int64")]),t._v(" "),a("td",[t._v("弹幕dmid")]),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",[t._v("oid")]),t._v(" "),a("td",[t._v("int64")]),t._v(" "),a("td",[t._v("视频cid")]),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",[t._v("mid")]),t._v(" "),a("td",[t._v("int64")]),t._v(" "),a("td",[t._v("发送者mid")]),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",[t._v("command")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("弹幕指令")]),t._v(" "),a("td",[a("code",[t._v("#UP#")]),t._v("：UP主头像弹幕"),a("br"),a("code",[t._v("#LINK#")]),t._v("：关联视频弹幕"),a("br"),a("code",[t._v("#ATTENTION#")]),t._v("：视频内嵌引导关注按钮")])]),t._v(" "),a("tr",[a("td",[t._v("content")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("弹幕文字")]),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",[t._v("progress")]),t._v(" "),a("td",[t._v("int32")]),t._v(" "),a("td",[t._v("弹幕出现时间")]),t._v(" "),a("td",[t._v("单位为毫秒")])]),t._v(" "),a("tr",[a("td",[t._v("ctime")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("创建时间？")]),t._v(" "),a("td",[t._v("此项为空")])]),t._v(" "),a("tr",[a("td",[t._v("mtime")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("修改时间？")]),t._v(" "),a("td",[t._v("此项为空")])]),t._v(" "),a("tr",[a("td",[t._v("extra")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("弹幕负载数据")]),t._v(" "),a("td",[t._v("json序列字串")])]),t._v(" "),a("tr",[a("td",[t._v("idStr")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("弹幕dmid")]),t._v(" "),a("td",[t._v("字串形式")])])])]),t._v(" "),a("p",[a("code",[t._v("extra")]),t._v("json序列：")]),t._v(" "),a("p",[t._v("类型为【UP主头像弹幕】时：")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("字段")]),t._v(" "),a("th",[t._v("类型")]),t._v(" "),a("th",[t._v("内容")]),t._v(" "),a("th",[t._v("备注")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("icon")]),t._v(" "),a("td",[t._v("str")]),t._v(" "),a("td",[t._v("UP主头像url")]),t._v(" "),a("td")])])]),t._v(" "),a("p",[t._v("类型为【关联视频弹幕】时：")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("字段")]),t._v(" "),a("th",[t._v("类型")]),t._v(" "),a("th",[t._v("内容")]),t._v(" "),a("th",[t._v("备注")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("aid")]),t._v(" "),a("td",[t._v("num")]),t._v(" "),a("td",[t._v("关联视频的avid")]),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",[t._v("title")]),t._v(" "),a("td",[t._v("str")]),t._v(" "),a("td",[t._v("关联视频的标题")]),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",[t._v("icon")]),t._v(" "),a("td",[t._v("str")]),t._v(" "),a("td",[t._v("关联视频按钮图片url")]),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",[t._v("bvid")]),t._v(" "),a("td",[t._v("str")]),t._v(" "),a("td",[t._v("关联视频的bvid")]),t._v(" "),a("td")])])]),t._v(" "),a("p",[t._v("类型为【视频内嵌引导关注按钮】时：")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("字段")]),t._v(" "),a("th",[t._v("类型")]),t._v(" "),a("th",[t._v("内容")]),t._v(" "),a("th",[t._v("备注")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("duration")]),t._v(" "),a("td",[t._v("num")]),t._v(" "),a("td",[t._v("持续时间")]),t._v(" "),a("td",[t._v("单位为毫秒")])]),t._v(" "),a("tr",[a("td",[t._v("posX")]),t._v(" "),a("td",[t._v("num")]),t._v(" "),a("td",[t._v("X坐标")]),t._v(" "),a("td",[t._v("区间：[118-549]")])]),t._v(" "),a("tr",[a("td",[t._v("posY")]),t._v(" "),a("td",[t._v("num")]),t._v(" "),a("td",[t._v("Y坐标")]),t._v(" "),a("td",[t._v("区间：[82-293]")])]),t._v(" "),a("tr",[a("td",[t._v("icon")]),t._v(" "),a("td",[t._v("str")]),t._v(" "),a("td",[t._v("按钮图片url")]),t._v(" "),a("td",[t._v("不应该是关注按钮吗，但这个是圆形的")])]),t._v(" "),a("tr",[a("td",[t._v("type")]),t._v(" "),a("td",[t._v("num")]),t._v(" "),a("td",[t._v("关注按钮类型")]),t._v(" "),a("td",[t._v("0：仅关注"),a("br"),t._v("1：仅三联"),a("br"),t._v("2：关注+三联")])])])]),t._v(" "),a("p",[t._v("消息"),a("code",[t._v("dmSetting")]),t._v("：")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("名称")]),t._v(" "),a("th",[t._v("类型")]),t._v(" "),a("th",[t._v("含义")]),t._v(" "),a("th",[t._v("备注")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("dmSwitch")]),t._v(" "),a("td",[t._v("bool")]),t._v(" "),a("td",[t._v("弹幕开关")]),t._v(" "),a("td",[t._v("true：开启"),a("br"),t._v("false：关闭")])]),t._v(" "),a("tr",[a("td",[t._v("aiSwitch")]),t._v(" "),a("td",[t._v("bool")]),t._v(" "),a("td",[t._v("智能云屏蔽")]),t._v(" "),a("td",[t._v("同上")])]),t._v(" "),a("tr",[a("td",[t._v("aiLevel")]),t._v(" "),a("td",[t._v("int32")]),t._v(" "),a("td",[t._v("智能云屏蔽级别")]),t._v(" "),a("td",[t._v("区间：[1-10]")])]),t._v(" "),a("tr",[a("td",[t._v("blocktop")]),t._v(" "),a("td",[t._v("bool")]),t._v(" "),a("td",[t._v("屏蔽类型-顶部")]),t._v(" "),a("td",[t._v("true：不屏蔽"),a("br"),t._v("false：屏蔽")])]),t._v(" "),a("tr",[a("td",[t._v("blockscroll")]),t._v(" "),a("td",[t._v("bool")]),t._v(" "),a("td",[t._v("屏蔽类型-滚动")]),t._v(" "),a("td",[t._v("同上")])]),t._v(" "),a("tr",[a("td",[t._v("blockbottom")]),t._v(" "),a("td",[t._v("bool")]),t._v(" "),a("td",[t._v("屏蔽类型-底部")]),t._v(" "),a("td",[t._v("同上")])]),t._v(" "),a("tr",[a("td",[t._v("blockcolor")]),t._v(" "),a("td",[t._v("bool")]),t._v(" "),a("td",[t._v("屏蔽类型-彩色")]),t._v(" "),a("td",[t._v("同上")])]),t._v(" "),a("tr",[a("td",[t._v("blockspecial")]),t._v(" "),a("td",[t._v("bool")]),t._v(" "),a("td",[t._v("屏蔽类型-特殊")]),t._v(" "),a("td",[t._v("同上")])]),t._v(" "),a("tr",[a("td",[t._v("preventshade")]),t._v(" "),a("td",[t._v("bool")]),t._v(" "),a("td",[t._v("防挡弹幕（底部15%）")]),t._v(" "),a("td",[t._v("true：开启"),a("br"),t._v("false：关闭")])]),t._v(" "),a("tr",[a("td",[t._v("dmask")]),t._v(" "),a("td",[t._v("bool")]),t._v(" "),a("td",[t._v("智能防挡弹幕（人像蒙版）")]),t._v(" "),a("td",[t._v("同上")])]),t._v(" "),a("tr",[a("td",[t._v("opacity")]),t._v(" "),a("td",[t._v("float")]),t._v(" "),a("td",[t._v("弹幕不透明度")]),t._v(" "),a("td",[t._v("区间：[0-1]")])]),t._v(" "),a("tr",[a("td",[t._v("dmarea")]),t._v(" "),a("td",[t._v("int32")]),t._v(" "),a("td",[t._v("弹幕显示区域")]),t._v(" "),a("td",[t._v("100：不重叠"),a("br"),t._v("75：3/4屏"),a("br"),t._v("50：半瓶"),a("br"),t._v("25：1/4屏"),a("br"),t._v("0：不限")])]),t._v(" "),a("tr",[a("td",[t._v("speedplus")]),t._v(" "),a("td",[t._v("float")]),t._v(" "),a("td",[t._v("弹幕速度")]),t._v(" "),a("td",[t._v("区间：[0.4-1.6]")])]),t._v(" "),a("tr",[a("td",[t._v("fontsize")]),t._v(" "),a("td",[t._v("float")]),t._v(" "),a("td",[t._v("字体大小")]),t._v(" "),a("td",[t._v("区间：[0.4-1.6]")])]),t._v(" "),a("tr",[a("td",[t._v("screensync")]),t._v(" "),a("td",[t._v("bool")]),t._v(" "),a("td",[t._v("跟随屏幕缩放比例")]),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",[t._v("speedsync")]),t._v(" "),a("td",[t._v("bool")]),t._v(" "),a("td",[t._v("根据播放倍速调整速度")]),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",[t._v("fontfamily")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("字体类型？")]),t._v(" "),a("td",[t._v("未启用")])]),t._v(" "),a("tr",[a("td",[t._v("bold")]),t._v(" "),a("td",[t._v("bool")]),t._v(" "),a("td",[t._v("粗体？")]),t._v(" "),a("td",[t._v("未启用")])]),t._v(" "),a("tr",[a("td",[t._v("fontborder")]),t._v(" "),a("td",[t._v("int32")]),t._v(" "),a("td",[t._v("描边类型")]),t._v(" "),a("td",[t._v("0：重墨"),a("br"),t._v("1：描边"),a("br"),t._v("2：45°投影")])]),t._v(" "),a("tr",[a("td",[t._v("drawType")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("渲染类型？")]),t._v(" "),a("td",[t._v("未启用")])])])]),t._v(" "),a("p",[t._v("protobuf结构体：")]),t._v(" "),a("p",[a("strong",[t._v("web_dmview.proto")])]),t._v(" "),a("div",{staticClass:"language-protobuf extra-class"},[a("pre",{pre:!0,attrs:{class:"language-protobuf"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("syntax")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"proto3"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//分段弹幕包信息？")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("message")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DmSegConfig")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("int64")]),t._v(" pageSize "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//分段时间？")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("int64")]),t._v(" total "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//最大分页数？")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("message")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DanmakuFlagConfig")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("int32")]),t._v(" recFlag "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("   "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v(" recText "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("int32")]),t._v(" recSwitch "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 互动弹幕条目")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("message")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CommandDm")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("int64")]),t._v(" id "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("       "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//弹幕dmid")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("int64")]),t._v(" oid "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//视频cid")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("int64")]),t._v(" mid "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//发送者mid")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v(" command "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//弹幕指令")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v(" content "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//弹幕文字")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("int32")]),t._v(" progress "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("6")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//弹幕出现时间")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v(" ctime "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("7")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("   "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v(" mtime "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("8")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("   "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v(" extra "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("9")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("   "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//弹幕负载数据")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v(" idStr "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//弹幕dmid（字串形式）")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//弹幕个人配置")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("message")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DanmuWebPlayerConfig")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("bool")]),t._v(" dmSwitch"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//弹幕开关")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("bool")]),t._v(" aiSwitch"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//智能云屏蔽")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("int32")]),t._v(" aiLevel"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//智能云屏蔽级别")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("bool")]),t._v(" blocktop"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//屏蔽类型-顶部")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("bool")]),t._v(" blockscroll"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("   "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//屏蔽类型-滚动")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("bool")]),t._v(" blockbottom"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("6")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("   "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//屏蔽类型-底部")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("bool")]),t._v(" blockcolor"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("7")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//屏蔽类型-彩色")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("bool")]),t._v(" blockspecial"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("8")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//屏蔽类型-特殊")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("bool")]),t._v(" preventshade"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("9")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//防挡弹幕（底部15%）")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("bool")]),t._v(" dmask"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//智能防挡弹幕（人像蒙版）")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("float")]),t._v(" opacity"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("11")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("     "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//弹幕不透明度")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("int32")]),t._v(" dmarea"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("12")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//弹幕显示区域")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("float")]),t._v(" speedplus"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("   "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//弹幕速度")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("float")]),t._v(" fontsize"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("14")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//字体大小")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("bool")]),t._v(" screensync"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("15")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("   "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//跟随屏幕缩放比例")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("bool")]),t._v(" speedsync"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("16")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//根据播放倍速调整速度")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v(" fontfamily"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("17")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//字体类型？")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("bool")]),t._v(" bold"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("18")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("         "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//粗体？")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("int32")]),t._v(" fontborder"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("19")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//描边类型")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v(" drawType"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("   "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//渲染类型？")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("message")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DmWebViewReply")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("int32")]),t._v(" state "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("                     "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//弹幕开放状态")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v(" text "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("                     "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v(" textSide "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("                 "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token positional-class-name class-name"}},[t._v("DmSegConfig")]),t._v(" dmSge "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("               "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//分段弹幕包信息？")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token positional-class-name class-name"}},[t._v("DanmakuFlagConfig")]),t._v(" flag "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("          "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("repeated")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v(" specialDms "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("6")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//BAS（代码）弹幕专包url")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("bool")]),t._v(" checkBox "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("7")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("                   "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("int64")]),t._v(" count "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("8")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("                     "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//实际弹幕总数")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("repeated")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token positional-class-name class-name"}},[t._v("CommandDm")]),t._v(" commandDms "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("9")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("   "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//互动弹幕条目")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token positional-class-name class-name"}},[t._v("DanmuWebPlayerConfig")]),t._v(" dmSetting "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//弹幕个人配置")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[a("strong",[t._v("示例：")])]),t._v(" "),a("p",[t._v("获取视频"),a("code",[t._v("av797164471(cid=236871317)")]),t._v("的弹幕元数据")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" -G "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http://api.bilibili.com/x/v2/dm/web/view'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n--data-urlencode "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'type=1'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n--data-urlencode "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'oid=236871317'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n--data-urlencode "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'pid=797164471'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n-b "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'SESSDATA=xxx'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n-o "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'danmaku_view.bin'")]),t._v("\n")])])]),a("p",[t._v("响应正文为protubuf二进制数据")]),t._v(" "),a("h2",{attrs:{id:"实例"}},[t._v("实例")]),t._v(" "),a("h3",{attrs:{id:"获取互动弹幕"}},[t._v("获取互动弹幕")]),t._v(" "),a("p",[t._v("获取并显示视频"),a("code",[t._v("av797164471(cid=236871317)")]),t._v("的所有互动弹幕")]),t._v(" "),a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" web_dmview_pb2\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" requests\n\nAVID "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("797164471")]),t._v("\nCID "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("236871317")]),t._v("\nurl "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string-interpolation"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v("f'http://api.bilibili.com/x/v2/dm/web/view?type=1&oid=")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("CID"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("&pid=")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("AVID"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'")])]),t._v("\n\ndata "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" requests"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("url"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\ntarget "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" web_dmview_pb2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("DmWebViewReply"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\ntarget"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ParseFromString"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("content"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string-interpolation"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v("f'互动弹幕数=")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("len")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("target"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("commandDms"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" i "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" target"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("commandDms"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string-interpolation"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v("f'''\\\n---弹幕ID=")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("id")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("\n---视频cid=")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("oid"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("\n---发送者mid=")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("mid"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("\n---弹幕指令=")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("command"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("\n---弹幕文字=")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("content"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("\n---弹幕出现时间=")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("progress"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("\n---弹幕负载数据=")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("extra"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("\n---弹幕ID（字串）=")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("idStr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'''")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("输出为：")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('互动弹幕数=1\n---弹幕ID=38469676112019463\n---视频cid=236871317\n---发送者mid=501183549\n---弹幕指令=#UP#\n---弹幕文字=这个视频没有恰饭！别紧张！\n---弹幕出现时间=157818\n---弹幕负载数据={"icon":"http://i1.hdslb.com/bfs/face/559abe31f561f71f3106d8ee7b2065cac50c1235.jpg"}\n---弹幕ID（字串）=38469676112019463\n')])])]),a("h3",{attrs:{id:"获取bas-代码-弹幕专包"}},[t._v("获取BAS（代码）弹幕专包")]),t._v(" "),a("p",[t._v("BAS弹幕（"),a("code",[t._v("pool=2")]),t._v(" "),a("code",[t._v("mode=9")]),t._v("）只能从此包获取，代码弹幕（"),a("code",[t._v("pool=2")]),t._v(" "),a("code",[t._v("mode=8")]),t._v("）也能从此包获取")]),t._v(" "),a("p",[t._v("获取并显示视频"),a("code",[t._v("av2(cid=62131)")]),t._v("的所有BAS（代码）弹幕专包")]),t._v(" "),a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" web_dmview_pb2\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" requests\n\nAVID "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\nCID "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("62131")]),t._v("\nurl "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string-interpolation"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v("f'http://api.bilibili.com/x/v2/dm/web/view?type=1&oid=")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("CID"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("&pid=")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("AVID"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'")])]),t._v("\n\ndata "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" requests"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("url"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\ntarget "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" web_dmview_pb2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("DmWebViewReply"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\ntarget"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ParseFromString"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("content"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string-interpolation"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v("f'特殊弹幕包数=")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("len")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("target"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("specialDms"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" i "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" target"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("specialDms"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string-interpolation"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v("f'特殊弹幕包url=")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("输出为：")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("特殊弹幕包数=1\n特殊弹幕包url=http://i0.hdslb.com/bfs/dm/b0d5f08c12be59292aa0d4e09b6dd8e54c2ba886.bin\n")])])]),a("p",[t._v("使用"),a("RouterLink",{attrs:{to:"/danmaku/danmaku_proto.html#获取实时弹幕"}},[t._v("普通分段包弹幕")]),t._v("的proto结构体反序列化此bin数据")],1)])}),[],!1,null,null,null);s.default=r.exports}}]);