(window.webpackJsonp=window.webpackJsonp||[]).push([[252],{646:function(t,s,_){"use strict";_.r(s);var v=_(32),a=Object(v.a)({},(function(){var t=this,s=t.$createElement,_=t._self._c||s;return _("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[_("h1",{attrs:{id:"二维码登录"}},[t._v("二维码登录")]),t._v(" "),_("p",[t._v("web端流程&逻辑：")]),t._v(" "),_("ol",[_("li",[t._v("获取"),_("code",[t._v("二维码内容url")]),t._v("以及"),_("code",[t._v("密钥")]),t._v("，以"),_("code",[t._v("二维码内容url")]),t._v("生成二维码，等待手机客户端扫描")]),t._v(" "),_("li",[t._v("以"),_("code",[t._v("密钥")]),t._v("作为参数进行POST")]),t._v(" "),_("li",[t._v("if  "),_("code",[t._v("code")]),t._v(" == "),_("code",[t._v("true")]),t._v(" goto "),_("code",[t._v("6")]),t._v("                               else goto 4（是否已经确认）")]),t._v(" "),_("li",[t._v("if "),_("code",[t._v("data")]),t._v(" == "),_("code",[t._v("-4")]),t._v("   goto "),_("code",[t._v("2")]),t._v("                                  else goto 5（是否已经扫描）")]),t._v(" "),_("li",[t._v("if "),_("code",[t._v("data")]),t._v(" == "),_("code",[t._v("-5")]),t._v("   goto "),_("code",[t._v("3")]),t._v(" & 提示"),_("code",[t._v("已扫描")]),t._v("        else goto "),_("code",[t._v("1")]),t._v("&提示"),_("code",[t._v("二维码超时或错误")]),t._v("（密钥是否有效）")]),t._v(" "),_("li",[t._v("成功后会自动配置cookie 如需登录游戏分站则访问"),_("code",[t._v("data")]),t._v("."),_("code",[t._v("url")]),t._v("中的url")])]),t._v(" "),_("p",[t._v("TV端流程&逻辑：")]),t._v(" "),_("ol",[_("li",[t._v("获取"),_("code",[t._v("二维码内容url")]),t._v("以及"),_("code",[t._v("密钥")]),t._v("，以"),_("code",[t._v("二维码内容url")]),t._v("生成二维码，等待手机客户端扫描")]),t._v(" "),_("li",[t._v("以"),_("code",[t._v("密钥")]),t._v("作为参数进行POST")]),t._v(" "),_("li",[t._v("if "),_("code",[t._v("code")]),t._v(" == "),_("code",[t._v("0")]),t._v("  提示"),_("code",[t._v("扫码成功")]),t._v("并存储"),_("code",[t._v("access_key")]),t._v("于"),_("code",[t._v("refersh_key")]),t._v(" else goto "),_("code",[t._v("4")])]),t._v(" "),_("li",[t._v("if "),_("code",[t._v("code")]),t._v(" == "),_("code",[t._v("86039")]),t._v("  提示"),_("code",[t._v("未扫描")]),t._v("&goto "),_("code",[t._v("2")]),t._v("                                         else goto "),_("code",[t._v("5")])]),t._v(" "),_("li",[t._v("if "),_("code",[t._v("code")]),t._v(" == "),_("code",[t._v("86038")]),t._v(" 提示"),_("code",[t._v("二维码超时或错误")]),t._v("&goto "),_("code",[t._v("1")])])]),t._v(" "),_("img",{attrs:{src:"/imgs/2233login.png"}}),t._v(" "),_("hr"),t._v(" "),_("ul",[_("li",[_("a",{attrs:{href:"#%E7%94%B3%E8%AF%B7%E4%BA%8C%E7%BB%B4%E7%A0%81URL%E5%8F%8A%E6%89%AB%E7%A0%81%E5%AF%86%E9%92%A5%EF%BC%88web%E7%AB%AF%EF%BC%89"}},[t._v("申请二维码URL及扫码密钥（web端）")])]),t._v(" "),_("li",[_("a",{attrs:{href:"#%E4%BD%BF%E7%94%A8%E6%89%AB%E7%A0%81%E7%99%BB%E5%BD%95%EF%BC%88web%E7%AB%AF%EF%BC%89"}},[t._v("使用扫码登录（web端）")])]),t._v(" "),_("li",[_("a",{attrs:{href:"#%E7%94%B3%E8%AF%B7%E4%BA%8C%E7%BB%B4%E7%A0%81URL%E5%8F%8A%E6%89%AB%E7%A0%81%E5%AF%86%E9%92%A5%EF%BC%88TV%E7%AB%AF%EF%BC%89"}},[t._v("申请二维码URL及扫码密钥（TV端）")])]),t._v(" "),_("li",[_("a",{attrs:{href:"#%E4%BD%BF%E7%94%A8%E6%89%AB%E7%A0%81%E7%99%BB%E5%BD%95%EF%BC%88TV%E7%AB%AF%EF%BC%89"}},[t._v("使用扫码登录（TV端）")])])]),t._v(" "),_("hr"),t._v(" "),_("h2",{attrs:{id:"申请二维码url及扫码密钥-web端"}},[t._v("申请二维码URL及扫码密钥（web端）")]),t._v(" "),_("blockquote",[_("p",[t._v("http://passport.bilibili.com/qrcode/getLoginUrl")])]),t._v(" "),_("p",[_("em",[t._v("请求方式：GET")])]),t._v(" "),_("p",[t._v("密钥超时为180秒")]),t._v(" "),_("p",[_("strong",[t._v("json回复：")])]),t._v(" "),_("p",[t._v("根对象：")]),t._v(" "),_("table",[_("thead",[_("tr",[_("th",[t._v("字段")]),t._v(" "),_("th",[t._v("类型")]),t._v(" "),_("th",[t._v("内容")]),t._v(" "),_("th",[t._v("备注")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[t._v("code")]),t._v(" "),_("td",[t._v("num")]),t._v(" "),_("td",[t._v("返回值")]),t._v(" "),_("td",[t._v("0：成功")])]),t._v(" "),_("tr",[_("td",[t._v("status")]),t._v(" "),_("td",[t._v("bool")]),t._v(" "),_("td",[t._v("true")]),t._v(" "),_("td",[t._v("作用尚不明确")])]),t._v(" "),_("tr",[_("td",[t._v("ts")]),t._v(" "),_("td",[t._v("num")]),t._v(" "),_("td",[t._v("请求时间")]),t._v(" "),_("td",[t._v("时间戳")])]),t._v(" "),_("tr",[_("td",[t._v("data")]),t._v(" "),_("td",[t._v("obj")]),t._v(" "),_("td",[t._v("信息本体")]),t._v(" "),_("td")])])]),t._v(" "),_("p",[_("code",[t._v("data")]),t._v("对象：")]),t._v(" "),_("table",[_("thead",[_("tr",[_("th",[t._v("字段")]),t._v(" "),_("th",[t._v("类型")]),t._v(" "),_("th",[t._v("内容")]),t._v(" "),_("th",[t._v("备注")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[t._v("url")]),t._v(" "),_("td",[t._v("str")]),t._v(" "),_("td",[t._v("二维码内容url")]),t._v(" "),_("td",[t._v("恒为87字符")])]),t._v(" "),_("tr",[_("td",[t._v("oauthKey")]),t._v(" "),_("td",[t._v("str")]),t._v(" "),_("td",[t._v("扫码登录秘钥")]),t._v(" "),_("td",[t._v("恒为32字符")])])])]),t._v(" "),_("p",[_("strong",[t._v("示例：")])]),t._v(" "),_("p",[t._v("用申请到的"),_("code",[t._v("data")]),t._v("."),_("code",[t._v("url")]),t._v("中的值生成二维码，等待手机客户端扫描，并将"),_("code",[t._v("data")]),t._v("."),_("code",[t._v("oauthKey")]),t._v("保存等待使用")]),t._v(" "),_("div",{staticClass:"language-shell extra-class"},[_("pre",{pre:!0,attrs:{class:"language-shell"}},[_("code",[_("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http://passport.bilibili.com/qrcode/getLoginUrl'")]),t._v("\n")])])]),_("details",[_("summary",[t._v("查看响应示例：")]),t._v(" "),_("div",{staticClass:"language-json extra-class"},[_("pre",{pre:!0,attrs:{class:"language-json"}},[_("code",[_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),_("span",{pre:!0,attrs:{class:"token property"}},[t._v('"code"')]),_("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t"),_("span",{pre:!0,attrs:{class:"token property"}},[t._v('"status"')]),_("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t"),_("span",{pre:!0,attrs:{class:"token property"}},[t._v('"ts"')]),_("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token number"}},[t._v("1583314311")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t"),_("span",{pre:!0,attrs:{class:"token property"}},[t._v('"data"')]),_("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),_("span",{pre:!0,attrs:{class:"token property"}},[t._v('"url"')]),_("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://passport.bilibili.com/qrcode/h5/login?oauthKey=c3bd5286a2b40a822f5f60e9bf3f602e"')]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\t"),_("span",{pre:!0,attrs:{class:"token property"}},[t._v('"oauthKey"')]),_("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token string"}},[t._v('"c3bd5286a2b40a822f5f60e9bf3f602e"')]),t._v("\n\t"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])]),t._v(" "),_("h2",{attrs:{id:"使用扫码登录-web端"}},[t._v("使用扫码登录（web端）")]),t._v(" "),_("blockquote",[_("p",[t._v("http://passport.bilibili.com/qrcode/getLoginInfo")])]),t._v(" "),_("p",[_("em",[t._v("请求方式：POST")])]),t._v(" "),_("p",[t._v("密钥超时为180秒")]),t._v(" "),_("p",[t._v("验证登录成功后会进行设置以下cookie项：")]),t._v(" "),_("p",[_("code",[t._v("DedeUserID")]),t._v(" "),_("code",[t._v("DedeUserID__ckMd5")]),t._v(" "),_("code",[t._v("SESSDATA")]),t._v(" "),_("code",[t._v("bili_jct")])]),t._v(" "),_("p",[_("strong",[t._v("正文参数（ application/x-www-form-urlencoded ）：")])]),t._v(" "),_("table",[_("thead",[_("tr",[_("th",[t._v("参数名")]),t._v(" "),_("th",[t._v("类型")]),t._v(" "),_("th",[t._v("内容")]),t._v(" "),_("th",[t._v("必要性")]),t._v(" "),_("th",[t._v("备注")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[t._v("oauthKey")]),t._v(" "),_("td",[t._v("str")]),t._v(" "),_("td",[t._v("扫码登录秘钥")]),t._v(" "),_("td",[t._v("必要")]),t._v(" "),_("td")]),t._v(" "),_("tr",[_("td",[t._v("gourl")]),t._v(" "),_("td",[t._v("str")]),t._v(" "),_("td",[t._v("跳转url")]),t._v(" "),_("td",[t._v("非必要")]),t._v(" "),_("td",[t._v("默认为http://www.bilibili.com")])])])]),t._v(" "),_("p",[_("strong",[t._v("json回复：")])]),t._v(" "),_("p",[t._v("根对象：")]),t._v(" "),_("table",[_("thead",[_("tr",[_("th",[t._v("字段")]),t._v(" "),_("th",[t._v("类型")]),t._v(" "),_("th",[t._v("内容")]),t._v(" "),_("th",[t._v("备注")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[t._v("code")]),t._v(" "),_("td",[t._v("num")]),t._v(" "),_("td",[t._v("返回值")]),t._v(" "),_("td",[t._v("0：成功")])]),t._v(" "),_("tr",[_("td",[t._v("message")]),t._v(" "),_("td",[t._v("str")]),t._v(" "),_("td",[t._v("错误信息")]),t._v(" "),_("td",[t._v("正确无")])]),t._v(" "),_("tr",[_("td",[t._v("ts")]),t._v(" "),_("td",[t._v("num")]),t._v(" "),_("td",[t._v("扫码时间")]),t._v(" "),_("td",[t._v("错误无")])]),t._v(" "),_("tr",[_("td",[t._v("status")]),t._v(" "),_("td",[t._v("bool")]),t._v(" "),_("td",[t._v("扫码是否成功")]),t._v(" "),_("td",[t._v("true：成功"),_("br"),t._v("false：未成功")])]),t._v(" "),_("tr",[_("td",[t._v("data")]),t._v(" "),_("td",[t._v("正确时：obj"),_("br"),t._v("错误时：num")]),t._v(" "),_("td",[t._v("正确时：游戏分站url"),_("br"),t._v("错误时：错误代码")]),t._v(" "),_("td",[t._v("未成功时："),_("br"),t._v("-1：密钥错误"),_("br"),t._v("-2：密钥超时"),_("br"),t._v("-4：未扫描"),_("br"),t._v("-5：未确认")])])])]),t._v(" "),_("p",[t._v("data 对象：")]),t._v(" "),_("table",[_("thead",[_("tr",[_("th",[t._v("字段")]),t._v(" "),_("th",[t._v("类型")]),t._v(" "),_("th",[t._v("内容")]),t._v(" "),_("th",[t._v("备注")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[t._v("url")]),t._v(" "),_("td",[t._v("str")]),t._v(" "),_("td",[t._v("游戏分站跨域登录url")]),t._v(" "),_("td")])])]),t._v(" "),_("p",[_("strong",[t._v("示例：")])]),t._v(" "),_("p",[t._v("使用扫描秘钥"),_("code",[t._v("c3bd5286a2b40a822f5f60e9bf3f602e")]),t._v("登录")]),t._v(" "),_("div",{staticClass:"language-shell extra-class"},[_("pre",{pre:!0,attrs:{class:"language-shell"}},[_("code",[_("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://passport.bilibili.com/qrcode/getLoginInfo"')]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n--data-urlencode "),_("span",{pre:!0,attrs:{class:"token string"}},[t._v("'oauthKey=c3bd5286a2b40a822f5f60e9bf3f602e'")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n-c "),_("span",{pre:!0,attrs:{class:"token string"}},[t._v("'cookie.txt'")]),t._v("\n")])])]),_("p",[t._v("当密钥正确时但未扫描时"),_("code",[t._v("status")]),t._v("为"),_("code",[t._v("false")]),t._v("，"),_("code",[t._v("data")]),t._v("为num值"),_("code",[t._v("-4")])]),t._v(" "),_("details",[_("summary",[t._v("查看响应示例：")]),t._v(" "),_("div",{staticClass:"language-json extra-class"},[_("pre",{pre:!0,attrs:{class:"language-json"}},[_("code",[_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),_("span",{pre:!0,attrs:{class:"token property"}},[t._v('"status"')]),_("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),_("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),_("span",{pre:!0,attrs:{class:"token property"}},[t._v('"data"')]),_("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),_("span",{pre:!0,attrs:{class:"token number"}},[t._v("-4")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),_("span",{pre:!0,attrs:{class:"token property"}},[t._v('"message"')]),_("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),_("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Can\'t scan~"')]),t._v("\n"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])]),t._v(" "),_("p",[t._v("扫描成功但手机端未确认时"),_("code",[t._v("status")]),t._v("为"),_("code",[t._v("false")]),t._v("，"),_("code",[t._v("data")]),t._v("为num值"),_("code",[t._v("-5")])]),t._v(" "),_("details",[_("summary",[t._v("查看响应示例：")]),t._v(" "),_("div",{staticClass:"language-json extra-class"},[_("pre",{pre:!0,attrs:{class:"language-json"}},[_("code",[_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),_("span",{pre:!0,attrs:{class:"token property"}},[t._v('"status"')]),_("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),_("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),_("span",{pre:!0,attrs:{class:"token property"}},[t._v('"data"')]),_("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),_("span",{pre:!0,attrs:{class:"token number"}},[t._v("-5")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),_("span",{pre:!0,attrs:{class:"token property"}},[t._v('"message"')]),_("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),_("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Can\'t confirm~"')]),t._v("\n"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])]),t._v(" "),_("p",[t._v("扫描成功手机端确认登录后，"),_("code",[t._v("status")]),t._v("为"),_("code",[t._v("true")]),t._v("，"),_("code",[t._v("data")]),t._v("为对象，并向浏览器写入cookie")]),t._v(" "),_("details",[_("summary",[t._v("查看响应示例：")]),t._v(" "),_("div",{staticClass:"language-json extra-class"},[_("pre",{pre:!0,attrs:{class:"language-json"}},[_("code",[_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),_("span",{pre:!0,attrs:{class:"token property"}},[t._v('"code"')]),_("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t"),_("span",{pre:!0,attrs:{class:"token property"}},[t._v('"status"')]),_("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t"),_("span",{pre:!0,attrs:{class:"token property"}},[t._v('"ts"')]),_("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token number"}},[t._v("1583315474")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t"),_("span",{pre:!0,attrs:{class:"token property"}},[t._v('"data"')]),_("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),_("span",{pre:!0,attrs:{class:"token property"}},[t._v('"url"')]),_("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://passport.biligame.com/crossDomain?DedeUserID=***&DedeUserID__ckMd5=***&Expires=***&SESSDATA=***&bili_jct=***&gourl=http%3A%2F%2Fwww.bilibili.com"')]),t._v("\n\t"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])]),t._v(" "),_("p",[_("strong",[t._v("响应头部抓包信息：")])]),t._v(" "),_("p",[t._v("可明显看见设置了几个cookie（填入浏览器即可成功登录）")]),t._v(" "),_("details",[_("summary",[t._v("查看响应示例：")]),t._v(" "),_("div",{staticClass:"language-http extra-class"},[_("pre",{pre:!0,attrs:{class:"language-http"}},[_("code",[_("span",{pre:!0,attrs:{class:"token response-status"}},[_("span",{pre:!0,attrs:{class:"token http-version property"}},[t._v("HTTP/1.1")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token status-code number"}},[t._v("200")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token reason-phrase string"}},[t._v("OK")])]),t._v("\n"),_("span",{pre:!0,attrs:{class:"token header-name keyword"}},[t._v("Date:")]),t._v(" Wed, 04 Mar 2020 10:36:37 GMT\n"),_("span",{pre:!0,attrs:{class:"token header-name keyword"}},[t._v("Content-Type:")]),t._v(" application/json;charset=UTF-8\n"),_("span",{pre:!0,attrs:{class:"token header-name keyword"}},[t._v("Transfer-Encoding:")]),t._v(" chunked\n"),_("span",{pre:!0,attrs:{class:"token header-name keyword"}},[t._v("Connection:")]),t._v(" keep-alive\n"),_("span",{pre:!0,attrs:{class:"token header-name keyword"}},[t._v("Server:")]),t._v(" Apache-Coyote/1.1\n"),_("span",{pre:!0,attrs:{class:"token header-name keyword"}},[t._v("Set-Cookie:")]),t._v(" sid=***; Domain=.bilibili.com; Expires=Thu, 04-Mar-2021 10:36:37 GMT; Path=/\n"),_("span",{pre:!0,attrs:{class:"token header-name keyword"}},[t._v("Set-Cookie:")]),t._v(" DedeUserID=***; Domain=.bilibili.com; Expires=Mon, 31-Aug-2020 10:19:57 GMT; Path=/\n"),_("span",{pre:!0,attrs:{class:"token header-name keyword"}},[t._v("Set-Cookie:")]),t._v(" DedeUserID__ckMd5=***; Domain=.bilibili.com; Expires=Mon, 31-Aug-2020 10:19:57 GMT; Path=/\n"),_("span",{pre:!0,attrs:{class:"token header-name keyword"}},[t._v("Set-Cookie:")]),t._v(" SESSDATA=***; Domain=.bilibili.com; Expires=Mon, 31-Aug-2020 10:19:57 GMT; Path=/; HttpOnly\n"),_("span",{pre:!0,attrs:{class:"token header-name keyword"}},[t._v("Set-Cookie:")]),t._v(" bili_jct=***; Domain=.bilibili.com; Expires=Mon, 31-Aug-2020 10:19:57 GMT; Path=/\n"),_("span",{pre:!0,attrs:{class:"token header-name keyword"}},[t._v("Expires:")]),t._v(" Wed, 04 Mar 2020 10:36:36 GMT\n"),_("span",{pre:!0,attrs:{class:"token header-name keyword"}},[t._v("Cache-Control:")]),t._v(" no-cache\n"),_("span",{pre:!0,attrs:{class:"token header-name keyword"}},[t._v("X-Cache-Webcdn:")]),t._v(" BYPASS from ks-sxhz-dx-w-01\n")])])])]),t._v(" "),_("p",[_("strong",[t._v("游戏分站跨域登录url：")])]),t._v(" "),_("p",[t._v("游戏分站跨域登录url与cookie的值一一对应，可用于不方便设置cookie的场合提取使用")]),t._v(" "),_("p",[t._v("https://passport.biligame.com/crossDomain?")]),t._v(" "),_("p",[t._v("DedeUserID=(登录mid)&")]),t._v(" "),_("p",[t._v("DedeUserID__ckMd5=(登录mid MD5值)&")]),t._v(" "),_("p",[t._v("Expires=(过期时间 秒)&")]),t._v(" "),_("p",[t._v("SESSDATA=(登录token)&")]),t._v(" "),_("p",[t._v("bili_jct=(csrf)&")]),t._v(" "),_("p",[t._v("gourl=(跳转网址 默认为主页)")]),t._v(" "),_("h2",{attrs:{id:"申请二维码url及扫码密钥-tv端"}},[t._v("申请二维码URL及扫码密钥（TV端）")]),t._v(" "),_("blockquote",[_("p",[t._v("http://passport.bilibili.com/x/passport-tv-login/qrcode/auth_code")])]),t._v(" "),_("p",[_("em",[t._v("请求方式：POST")])]),t._v(" "),_("p",[t._v("鉴权方式：appkey")]),t._v(" "),_("p",[t._v("密钥超时为180秒")]),t._v(" "),_("p",[t._v("本接口可申请用于APP方式登录的"),_("code",[t._v("access_key")])]),t._v(" "),_("p",[_("strong",[t._v("正文参数（ application/x-www-form-urlencoded ）：")])]),t._v(" "),_("table",[_("thead",[_("tr",[_("th",[t._v("参数名")]),t._v(" "),_("th",[t._v("类型")]),t._v(" "),_("th",[t._v("内容")]),t._v(" "),_("th",[t._v("必要性")]),t._v(" "),_("th",[t._v("备注")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[t._v("appkey")]),t._v(" "),_("td",[t._v("str")]),t._v(" "),_("td",[t._v("APP密钥")]),t._v(" "),_("td",[t._v("APP方式必要")]),t._v(" "),_("td",[t._v("仅可用"),_("code",[t._v("4409e2ce8ffd12b8")])])]),t._v(" "),_("tr",[_("td",[t._v("local_id")]),t._v(" "),_("td",[t._v("str")]),t._v(" "),_("td",[t._v("TV端id")]),t._v(" "),_("td",[t._v("TV端必要")]),t._v(" "),_("td",[t._v("可为0")])]),t._v(" "),_("tr",[_("td",[t._v("ts")]),t._v(" "),_("td",[t._v("num")]),t._v(" "),_("td",[t._v("当前时间戳")]),t._v(" "),_("td",[t._v("APP方式必要")]),t._v(" "),_("td")]),t._v(" "),_("tr",[_("td",[t._v("sign")]),t._v(" "),_("td",[t._v("str")]),t._v(" "),_("td",[t._v("APP签名")]),t._v(" "),_("td",[t._v("APP方式必要")]),t._v(" "),_("td")])])]),t._v(" "),_("p",[_("strong",[t._v("json回复：")])]),t._v(" "),_("p",[t._v("根对象：")]),t._v(" "),_("table",[_("thead",[_("tr",[_("th",[t._v("字段")]),t._v(" "),_("th",[t._v("类型")]),t._v(" "),_("th",[t._v("内容")]),t._v(" "),_("th",[t._v("备注")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[t._v("code")]),t._v(" "),_("td",[t._v("num")]),t._v(" "),_("td",[t._v("返回值")]),t._v(" "),_("td",[t._v("0：成功"),_("br"),t._v("-3：API校验密匙错误"),_("br"),t._v("-400：请求错误")])]),t._v(" "),_("tr",[_("td",[t._v("message")]),t._v(" "),_("td",[t._v("str")]),t._v(" "),_("td",[t._v("错误信息")]),t._v(" "),_("td",[t._v("默认为0")])]),t._v(" "),_("tr",[_("td",[t._v("ttl")]),t._v(" "),_("td",[t._v("num")]),t._v(" "),_("td",[t._v("1")]),t._v(" "),_("td")]),t._v(" "),_("tr",[_("td",[t._v("data")]),t._v(" "),_("td",[t._v("obj")]),t._v(" "),_("td",[t._v("信息本体")]),t._v(" "),_("td")])])]),t._v(" "),_("p",[_("code",[t._v("data")]),t._v("对象：")]),t._v(" "),_("table",[_("thead",[_("tr",[_("th",[t._v("字段")]),t._v(" "),_("th",[t._v("类型")]),t._v(" "),_("th",[t._v("内容")]),t._v(" "),_("th",[t._v("备注")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[t._v("url")]),t._v(" "),_("td",[t._v("str")]),t._v(" "),_("td",[t._v("二维码内容url")]),t._v(" "),_("td",[t._v("恒为87字符")])]),t._v(" "),_("tr",[_("td",[t._v("oauthKey")]),t._v(" "),_("td",[t._v("str")]),t._v(" "),_("td",[t._v("扫码登录秘钥")]),t._v(" "),_("td",[t._v("恒为32字符")])])])]),t._v(" "),_("p",[_("strong",[t._v("示例：")])]),t._v(" "),_("div",{staticClass:"language-shell extra-class"},[_("pre",{pre:!0,attrs:{class:"language-shell"}},[_("code",[_("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http://passport.bilibili.com/x/passport-tv-login/qrcode/auth_code'")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n--data-urlencode "),_("span",{pre:!0,attrs:{class:"token string"}},[t._v("'appkey=4409e2ce8ffd12b8'")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n--data-urlencode "),_("span",{pre:!0,attrs:{class:"token string"}},[t._v("'local_id=0'")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n--data-urlencode "),_("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ts=0'")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n--data-urlencode "),_("span",{pre:!0,attrs:{class:"token string"}},[t._v("'sign=e134154ed6add881d28fbdf68653cd9c'")]),t._v("\n")])])]),_("details",[_("summary",[t._v("查看响应示例：")]),t._v(" "),_("div",{staticClass:"language-json extra-class"},[_("pre",{pre:!0,attrs:{class:"language-json"}},[_("code",[_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),_("span",{pre:!0,attrs:{class:"token property"}},[t._v('"code"')]),_("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),_("span",{pre:!0,attrs:{class:"token property"}},[t._v('"message"')]),_("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0"')]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),_("span",{pre:!0,attrs:{class:"token property"}},[t._v('"ttl"')]),_("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),_("span",{pre:!0,attrs:{class:"token property"}},[t._v('"data"')]),_("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),_("span",{pre:!0,attrs:{class:"token property"}},[t._v('"url"')]),_("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://passport.bilibili.com/x/passport-tv-login/h5/qrcode/auth?auth_code=0eeb635a64526709d70cb4c854a3b001"')]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),_("span",{pre:!0,attrs:{class:"token property"}},[t._v('"auth_code"')]),_("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0eeb635a64526709d70cb4c854a3b001"')]),t._v("\n    "),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])]),t._v(" "),_("h2",{attrs:{id:"使用扫码登录-tv端"}},[t._v("使用扫码登录（TV端）")]),t._v(" "),_("blockquote",[_("p",[t._v("http://passport.bilibili.com/x/passport-tv-login/qrcode/poll")])]),t._v(" "),_("p",[_("em",[t._v("请求方式：POST")])]),t._v(" "),_("p",[t._v("鉴权方式：appkey")]),t._v(" "),_("p",[t._v("密钥超时为180秒")]),t._v(" "),_("p",[t._v("验证登录成功后会返回可用于APP方式登录的"),_("code",[t._v("access_key")]),t._v("以及"),_("code",[t._v("refresh_token")])]),t._v(" "),_("p",[_("strong",[t._v("正文参数（ application/x-www-form-urlencoded ）：")])]),t._v(" "),_("table",[_("thead",[_("tr",[_("th",[t._v("参数名")]),t._v(" "),_("th",[t._v("类型")]),t._v(" "),_("th",[t._v("内容")]),t._v(" "),_("th",[t._v("必要性")]),t._v(" "),_("th",[t._v("备注")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[t._v("appkey")]),t._v(" "),_("td",[t._v("str")]),t._v(" "),_("td",[t._v("APP密钥")]),t._v(" "),_("td",[t._v("APP方式必要")]),t._v(" "),_("td",[t._v("仅可用"),_("code",[t._v("4409e2ce8ffd12b8")])])]),t._v(" "),_("tr",[_("td",[t._v("auth_code")]),t._v(" "),_("td",[t._v("str")]),t._v(" "),_("td",[t._v("扫码秘钥")]),t._v(" "),_("td",[t._v("必要")]),t._v(" "),_("td")]),t._v(" "),_("tr",[_("td",[t._v("local_id")]),t._v(" "),_("td",[t._v("str")]),t._v(" "),_("td",[t._v("TV端id")]),t._v(" "),_("td",[t._v("TV端必要")]),t._v(" "),_("td",[t._v("可为0")])]),t._v(" "),_("tr",[_("td",[t._v("ts")]),t._v(" "),_("td",[t._v("num")]),t._v(" "),_("td",[t._v("当前时间戳")]),t._v(" "),_("td",[t._v("APP方式必要")]),t._v(" "),_("td")]),t._v(" "),_("tr",[_("td",[t._v("sign")]),t._v(" "),_("td",[t._v("str")]),t._v(" "),_("td",[t._v("APP签名")]),t._v(" "),_("td",[t._v("APP方式必要")]),t._v(" "),_("td")])])]),t._v(" "),_("p",[_("strong",[t._v("json回复：")])]),t._v(" "),_("p",[t._v("根对象：")]),t._v(" "),_("table",[_("thead",[_("tr",[_("th",[t._v("字段")]),t._v(" "),_("th",[t._v("类型")]),t._v(" "),_("th",[t._v("内容")]),t._v(" "),_("th",[t._v("备注")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[t._v("code")]),t._v(" "),_("td",[t._v("num")]),t._v(" "),_("td",[t._v("返回值")]),t._v(" "),_("td",[t._v("0：成功"),_("br"),t._v("-3：API校验密匙错误"),_("br"),t._v("-400：请求错误"),_("br"),t._v("86038：二维码已失效"),_("br"),t._v("86039：二维码尚未确认")])]),t._v(" "),_("tr",[_("td",[t._v("message")]),t._v(" "),_("td",[t._v("str")]),t._v(" "),_("td",[t._v("错误信息")]),t._v(" "),_("td",[t._v("默认为0")])]),t._v(" "),_("tr",[_("td",[t._v("ttl")]),t._v(" "),_("td",[t._v("num")]),t._v(" "),_("td",[t._v("1")]),t._v(" "),_("td")]),t._v(" "),_("tr",[_("td",[t._v("data")]),t._v(" "),_("td",[t._v("有效时：obj"),_("br"),t._v("无效时：null")]),t._v(" "),_("td",[t._v("信息本体")]),t._v(" "),_("td")])])]),t._v(" "),_("p",[_("code",[t._v("data")]),t._v("对象：")]),t._v(" "),_("table",[_("thead",[_("tr",[_("th",[t._v("字段")]),t._v(" "),_("th",[t._v("类型")]),t._v(" "),_("th",[t._v("内容")]),t._v(" "),_("th",[t._v("备注")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[t._v("mid")]),t._v(" "),_("td",[t._v("num")]),t._v(" "),_("td",[t._v("登录用户mid")]),t._v(" "),_("td")]),t._v(" "),_("tr",[_("td",[t._v("access_token")]),t._v(" "),_("td",[t._v("str")]),t._v(" "),_("td",[t._v("APP登录Token")]),t._v(" "),_("td")]),t._v(" "),_("tr",[_("td",[t._v("refresh_token")]),t._v(" "),_("td",[t._v("str")]),t._v(" "),_("td",[t._v("APP刷新Token")]),t._v(" "),_("td")]),t._v(" "),_("tr",[_("td",[t._v("expires_in")]),t._v(" "),_("td",[t._v("num")]),t._v(" "),_("td",[t._v("有效时间")]),t._v(" "),_("td",[t._v("单位为秒  一般为30天")])])])]),t._v(" "),_("p",[_("strong",[t._v("示例：")])]),t._v(" "),_("p",[t._v("使用扫描秘钥"),_("code",[t._v("6214464b3025541abf6f654cf7569a01")]),t._v("进行验证登录")]),t._v(" "),_("div",{staticClass:"language-shell extra-class"},[_("pre",{pre:!0,attrs:{class:"language-shell"}},[_("code",[_("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http://passport.bilibili.com/x/passport-tv-login/qrcode/poll'")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n--data-urlencode "),_("span",{pre:!0,attrs:{class:"token string"}},[t._v("'appkey=4409e2ce8ffd12b8'")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n--data-urlencode "),_("span",{pre:!0,attrs:{class:"token string"}},[t._v("'auth_code=6214464b3025541abf6f654cf7569a01'")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n--data-urlencode "),_("span",{pre:!0,attrs:{class:"token string"}},[t._v("'local_id=0'")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n--data-urlencode "),_("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ts=0'")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n--data-urlencode "),_("span",{pre:!0,attrs:{class:"token string"}},[t._v("'sign=87de3d0fee7c3f4facd244537238914e'")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n")])])]),_("details",[_("summary",[t._v("查看响应示例：")]),t._v(" "),_("div",{staticClass:"language-json extra-class"},[_("pre",{pre:!0,attrs:{class:"language-json"}},[_("code",[_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),_("span",{pre:!0,attrs:{class:"token property"}},[t._v('"code"')]),_("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),_("span",{pre:!0,attrs:{class:"token property"}},[t._v('"message"')]),_("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0"')]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),_("span",{pre:!0,attrs:{class:"token property"}},[t._v('"ttl"')]),_("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),_("span",{pre:!0,attrs:{class:"token property"}},[t._v('"data"')]),_("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),_("span",{pre:!0,attrs:{class:"token property"}},[t._v('"mid"')]),_("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token number"}},[t._v("293793435")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),_("span",{pre:!0,attrs:{class:"token property"}},[t._v('"access_token"')]),_("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token string"}},[t._v('"***"')]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),_("span",{pre:!0,attrs:{class:"token property"}},[t._v('"refresh_token"')]),_("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token string"}},[t._v('"***"')]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),_("span",{pre:!0,attrs:{class:"token property"}},[t._v('"expires_in"')]),_("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token number"}},[t._v("2592000")]),t._v("\n    "),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])])])}),[],!1,null,null,null);s.default=a.exports}}]);